{
  "section": 15,
  "title": "Modal/Dialog Component",
  "metadata": {
    "startLine": 4944,
    "endLine": 5456,
    "codeBlockCount": 15,
    "tableCount": 0,
    "extractedAt": "2025-12-01T16:35:09.314Z"
  },
  "codeBlocks": [
    {
      "id": "code-15-0",
      "language": "tsx",
      "code": "<AnimatePresence>\n  {isOpen && (\n    <>\n      {/* 1. Backdrop */}\n      <motion.div\n        className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50\"\n        onClick={onClose}\n      />\n\n      {/* 2. Modal Container */}\n      <motion.div className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-50\">\n        {/* 3. Header */}\n        <div className=\"px-6 py-4 border-b border-white/10\">\n          {/* Icon + Title + Close Button */}\n        </div>\n\n        {/* 4. Content */}\n        <div className=\"p-6\">\n          {/* Form fields, warnings, data display */}\n        </div>\n\n        {/* 5. Footer */}\n        <div className=\"px-6 py-4 border-t border-white/10\">\n          {/* Cancel + Primary Action */}\n        </div>\n      </motion.div>\n    </>\n  )}\n</AnimatePresence>",
      "lineNumber": 4969
    },
    {
      "id": "code-15-1",
      "language": "typescript",
      "code": "interface ModalProps {\n  /** Controls modal visibility */\n  isOpen: boolean;\n\n  /** Close callback */\n  onClose: () => void;\n\n  /** Modal title */\n  title: string;\n\n  /** Optional icon component */\n  icon?: React.ReactNode;\n\n  /** Modal size */\n  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n\n  /** Show close button */\n  showCloseButton?: boolean;\n\n  /** Close on backdrop click */\n  closeOnBackdrop?: boolean;\n\n  /** Close on Escape key */\n  closeOnEscape?: boolean;\n\n  /** Modal content */\n  children: React.ReactNode;\n\n  /** Footer actions */\n  footer?: React.ReactNode;\n}",
      "lineNumber": 5005
    },
    {
      "id": "code-15-2",
      "language": "typescript",
      "code": "size?: 'sm' | 'md' | 'lg' | 'xl' | 'full'\n\n// CSS Classes\nsm:   'max-w-sm'   // 384px - Simple confirmations\nmd:   'max-w-md'   // 448px - Standard forms\nlg:   'max-w-lg'   // 512px - Complex forms (DEFAULT)\nxl:   'max-w-xl'   // 576px - Multi-section forms\nfull: 'max-w-4xl'  // 896px - Data tables, wizards",
      "lineNumber": 5043
    },
    {
      "id": "code-15-3",
      "language": "tsx",
      "code": "initial={{ opacity: 0, scale: 0.95 }}\nanimate={{ opacity: 1, scale: 1 }}\nexit={{ opacity: 0, scale: 0.95 }}\ntransition={{ duration: 0.2, ease: 'easeOut' }}",
      "lineNumber": 5059
    },
    {
      "id": "code-15-4",
      "language": "tsx",
      "code": "initial={{ opacity: 0 }}\nanimate={{ opacity: 1 }}\nexit={{ opacity: 0 }}\ntransition={{ duration: 0.15 }}",
      "lineNumber": 5067
    },
    {
      "id": "code-15-5",
      "language": "tsx",
      "code": "import { motion, AnimatePresence } from 'framer-motion';\nimport { X, RefreshCw, AlertTriangle } from 'lucide-react';\nimport Button from '@/components/ui/Button';\nimport TextField from '@/components/ui/TextField';\n\ninterface RefundModalProps {\n  transaction: Transaction;\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: (amount: number, reason: string) => Promise<void>;\n}\n\nconst RefundModal: React.FC<RefundModalProps> = ({\n  transaction,\n  isOpen,\n  onClose,\n  onConfirm,\n}) => {\n  const [refundType, setRefundType] = useState<'full' | 'partial'>('full');\n  const [amount, setAmount] = useState(transaction.amount.toString());\n  const [reason, setReason] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async () => {\n    setLoading(true);\n    try {\n      const refundAmount = refundType === 'full'\n        ? transaction.amount\n        : parseFloat(amount);\n      await onConfirm(refundAmount, reason);\n      onClose();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={onClose}\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50\"\n          />\n\n          {/* Modal */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.95 }}\n            className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-slate-900/95 backdrop-blur-xl rounded-2xl border border-white/20 z-50\"\n          >\n            {/* Header */}\n            <div className=\"px-6 py-4 border-b border-white/10\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"p-2 bg-blue-500/20 rounded-xl\">\n                    <RefreshCw className=\"h-5 w-5 text-blue-400\" />\n                  </div>\n                  <h2 className=\"text-xl font-semibold text-white\">Issue Refund</h2>\n                </div>\n                <button\n                  onClick={onClose}\n                  className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\"\n                >\n                  <X className=\"h-5 w-5 text-white/60\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Content */}\n            <div className=\"p-6 space-y-6\">\n              {/* Warning Banner */}\n              <div className=\"p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl\">\n                <div className=\"flex items-start space-x-3\">\n                  <AlertTriangle className=\"h-5 w-5 text-amber-400 mt-0.5\" />\n                  <div>\n                    <p className=\"text-sm text-amber-400 font-medium\">Important</p>\n                    <p className=\"text-xs text-amber-400/80 mt-1\">\n                      Refunds are irreversible once processed. Amount will be credited\n                      to customer's original payment method within 5-7 business days.\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Transaction Details */}\n              <div className=\"p-4 bg-white/5 rounded-xl\">\n                <h3 className=\"text-sm font-medium text-white mb-3\">Transaction Details</h3>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white/60\">Transaction ID</span>\n                    <span className=\"text-white font-mono\">{transaction.id}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white/60\">Original Amount</span>\n                    <span className=\"text-white font-medium\">\n                      ₹{transaction.amount.toLocaleString('en-IN')}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Refund Type Selection */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-3\">\n                  Refund Type\n                </label>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <button\n                    onClick={() => setRefundType('full')}\n                    className={`px-4 py-3 rounded-xl border transition-all ${\n                      refundType === 'full'\n                        ? 'bg-blue-500/20 border-blue-500/50 text-blue-400'\n                        : 'bg-white/5 border-white/10 text-white/60 hover:bg-white/10'\n                    }`}\n                  >\n                    Full Refund\n                  </button>\n                  <button\n                    onClick={() => setRefundType('partial')}\n                    className={`px-4 py-3 rounded-xl border transition-all ${\n                      refundType === 'partial'\n                        ? 'bg-blue-500/20 border-blue-500/50 text-blue-400'\n                        : 'bg-white/5 border-white/10 text-white/60 hover:bg-white/10'\n                    }`}\n                  >\n                    Partial Refund\n                  </button>\n                </div>\n              </div>\n\n              {/* Amount Input (Partial only) */}\n              {refundType === 'partial' && (\n                <TextField\n                  name=\"amount\"\n                  label=\"Refund Amount\"\n                  type=\"number\"\n                  value={amount}\n                  onChange={(e) => setAmount(e.target.value)}\n                  placeholder=\"0.00\"\n                  leftIcon=\"₹\"\n                />\n              )}\n\n              {/* Reason Selection */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  Reason for Refund\n                </label>\n                <select\n                  value={reason}\n                  onChange={(e) => setReason(e.target.value)}\n                  className=\"w-full px-3 py-3 bg-white/5 border border-white/10 rounded-xl text-white\"\n                >\n                  <option value=\"\">Select a reason</option>\n                  <option value=\"customer_request\">Customer request</option>\n                  <option value=\"duplicate\">Duplicate payment</option>\n                  <option value=\"service_not_provided\">Service not provided</option>\n                  <option value=\"technical_error\">Technical error</option>\n                </select>\n              </div>\n            </div>\n\n            {/* Footer */}\n            <div className=\"px-6 py-4 border-t border-white/10 flex justify-end space-x-3\">\n              <Button\n                variant=\"ghost\"\n                onClick={onClose}\n                disabled={loading}\n              >\n                Cancel\n              </Button>\n              <Button\n                variant=\"primary\"\n                onClick={handleSubmit}\n                isLoading={loading}\n                leftIcon={<RefreshCw className=\"h-4 w-4\" />}\n              >\n                Confirm Refund\n              </Button>\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n};",
      "lineNumber": 5078
    },
    {
      "id": "code-15-6",
      "language": "tsx",
      "code": "<Modal\n  isOpen={isOpen}\n  onClose={onClose}\n  size=\"sm\"\n  title=\"Delete Transaction?\"\n  icon={<AlertTriangle className=\"h-5 w-5 text-red-400\" />}\n  footer={\n    <>\n      <Button variant=\"ghost\" onClick={onClose}>Cancel</Button>\n      <Button variant=\"danger\" onClick={handleDelete}>Delete</Button>\n    </>\n  }\n>\n  <p className=\"text-white/70\">\n    This action cannot be undone. The transaction will be permanently removed.\n  </p>\n</Modal>",
      "lineNumber": 5278
    },
    {
      "id": "code-15-7",
      "language": "tsx",
      "code": "<Modal\n  isOpen={isOpen}\n  onClose={onClose}\n  size=\"md\"\n  title=\"Add Team Member\"\n>\n  <form onSubmit={handleSubmit} className=\"space-y-4\">\n    <TextField name=\"email\" label=\"Email Address\" type=\"email\" />\n    <TextField name=\"name\" label=\"Full Name\" />\n    <select name=\"role\" className=\"...\">\n      <option value=\"admin\">Admin</option>\n      <option value=\"member\">Member</option>\n    </select>\n    <div className=\"flex justify-end space-x-3 mt-6\">\n      <Button variant=\"ghost\" type=\"button\" onClick={onClose}>\n        Cancel\n      </Button>\n      <Button variant=\"primary\" type=\"submit\">\n        Send Invitation\n      </Button>\n    </div>\n  </form>\n</Modal>",
      "lineNumber": 5299
    },
    {
      "id": "code-15-8",
      "language": "tsx",
      "code": "<Modal\n  isOpen={isOpen}\n  onClose={onClose}\n  size=\"lg\"\n  title=\"Settlement Details\"\n  icon={<FileText className=\"h-5 w-5 text-blue-400\" />}\n>\n  <div className=\"space-y-4\">\n    {/* Display settlement information */}\n    <Card variant=\"glass\" padding=\"md\">\n      <h3>Settlement #STL-12345</h3>\n      <p>Amount: ₹1,23,456.78</p>\n      <p>Status: Completed</p>\n    </Card>\n  </div>\n</Modal>",
      "lineNumber": 5326
    },
    {
      "id": "code-15-9",
      "language": "tsx",
      "code": "// Close on Escape key\nuseEffect(() => {\n  const handleEscape = (e: KeyboardEvent) => {\n    if (e.key === 'Escape' && isOpen) {\n      onClose();\n    }\n  };\n\n  document.addEventListener('keydown', handleEscape);\n  return () => document.removeEventListener('keydown', handleEscape);\n}, [isOpen, onClose]);",
      "lineNumber": 5350
    },
    {
      "id": "code-15-10",
      "language": "tsx",
      "code": "// Trap focus inside modal\nimport { useEffect, useRef } from 'react';\n\nconst modalRef = useRef<HTMLDivElement>(null);\n\nuseEffect(() => {\n  if (isOpen && modalRef.current) {\n    const focusableElements = modalRef.current.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n\n    const firstElement = focusableElements[0] as HTMLElement;\n    const lastElement = focusableElements[focusableElements.length - 1] as HTMLElement;\n\n    firstElement?.focus();\n\n    // Handle Tab key to trap focus\n    const handleTab = (e: KeyboardEvent) => {\n      if (e.key !== 'Tab') return;\n\n      if (e.shiftKey && document.activeElement === firstElement) {\n        e.preventDefault();\n        lastElement?.focus();\n      } else if (!e.shiftKey && document.activeElement === lastElement) {\n        e.preventDefault();\n        firstElement?.focus();\n      }\n    };\n\n    document.addEventListener('keydown', handleTab);\n    return () => document.removeEventListener('keydown', handleTab);\n  }\n}, [isOpen]);",
      "lineNumber": 5365
    },
    {
      "id": "code-15-11",
      "language": "tsx",
      "code": "<motion.div\n  role=\"dialog\"\n  aria-modal=\"true\"\n  aria-labelledby=\"modal-title\"\n  aria-describedby=\"modal-description\"\n  ref={modalRef}\n>\n  <h2 id=\"modal-title\">{title}</h2>\n  <div id=\"modal-description\">{children}</div>\n</motion.div>",
      "lineNumber": 5402
    },
    {
      "id": "code-15-12",
      "language": "tsx",
      "code": "// WRONG: Nested modals confuse users\n<Modal isOpen={modal1}>\n  <Modal isOpen={modal2}>...</Modal>\n</Modal>\n\n// CORRECT: Close first modal before opening second\nconst handleNext = () => {\n  setModal1(false);\n  setTimeout(() => setModal2(true), 300); // Wait for exit animation\n};",
      "lineNumber": 5420
    },
    {
      "id": "code-15-13",
      "language": "tsx",
      "code": "// WRONG: No feedback during async action\n<Button onClick={handleSubmit}>Submit</Button>\n\n// CORRECT: Show loading state\n<Button onClick={handleSubmit} isLoading={loading}>\n  Submit\n</Button>",
      "lineNumber": 5434
    },
    {
      "id": "code-15-14",
      "language": "tsx",
      "code": "// WRONG: Generic button labels\n<Button>OK</Button>\n<Button>Cancel</Button>\n\n// CORRECT: Action-specific labels\n<Button>Confirm Refund</Button>\n<Button>Cancel Refund</Button>",
      "lineNumber": 5445
    }
  ],
  "tables": [],
  "content": "## Section 15: Modal/Dialog Component\n\n### 15.1 Component Overview\n\n**Description**: Full-screen overlay dialogs with backdrop blur, animations, and form integration. Used for critical user actions requiring focus.\n\n**Pattern**: Framer Motion AnimatePresence with backdrop + centered modal\n\n**When to Use**:\n- ✅ Confirmation dialogs (destructive actions)\n- ✅ Complex forms (refunds, transfers)\n- ✅ Data entry requiring focus\n- ✅ Multi-step workflows\n- ✅ Critical alerts requiring acknowledgment\n\n**When NOT to Use**:\n- ❌ Simple notifications (use Toast)\n- ❌ Non-blocking messages\n- ❌ Tooltips or popovers\n- ❌ Large data tables (use full page)\n\n---\n\n### 15.2 Modal Anatomy\n\n```tsx\n<AnimatePresence>\n  {isOpen && (\n    <>\n      {/* 1. Backdrop */}\n      <motion.div\n        className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50\"\n        onClick={onClose}\n      />\n\n      {/* 2. Modal Container */}\n      <motion.div className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-50\">\n        {/* 3. Header */}\n        <div className=\"px-6 py-4 border-b border-white/10\">\n          {/* Icon + Title + Close Button */}\n        </div>\n\n        {/* 4. Content */}\n        <div className=\"p-6\">\n          {/* Form fields, warnings, data display */}\n        </div>\n\n        {/* 5. Footer */}\n        <div className=\"px-6 py-4 border-t border-white/10\">\n          {/* Cancel + Primary Action */}\n        </div>\n      </motion.div>\n    </>\n  )}\n</AnimatePresence>\n```\n\n---\n\n### 15.3 TypeScript Interface\n\n```typescript\ninterface ModalProps {\n  /** Controls modal visibility */\n  isOpen: boolean;\n\n  /** Close callback */\n  onClose: () => void;\n\n  /** Modal title */\n  title: string;\n\n  /** Optional icon component */\n  icon?: React.ReactNode;\n\n  /** Modal size */\n  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';\n\n  /** Show close button */\n  showCloseButton?: boolean;\n\n  /** Close on backdrop click */\n  closeOnBackdrop?: boolean;\n\n  /** Close on Escape key */\n  closeOnEscape?: boolean;\n\n  /** Modal content */\n  children: React.ReactNode;\n\n  /** Footer actions */\n  footer?: React.ReactNode;\n}\n```\n\n---\n\n### 15.4 Modal Sizes\n\n```typescript\nsize?: 'sm' | 'md' | 'lg' | 'xl' | 'full'\n\n// CSS Classes\nsm:   'max-w-sm'   // 384px - Simple confirmations\nmd:   'max-w-md'   // 448px - Standard forms\nlg:   'max-w-lg'   // 512px - Complex forms (DEFAULT)\nxl:   'max-w-xl'   // 576px - Multi-section forms\nfull: 'max-w-4xl'  // 896px - Data tables, wizards\n```\n\n---\n\n### 15.5 Animations\n\n#### Entry Animation\n```tsx\ninitial={{ opacity: 0, scale: 0.95 }}\nanimate={{ opacity: 1, scale: 1 }}\nexit={{ opacity: 0, scale: 0.95 }}\ntransition={{ duration: 0.2, ease: 'easeOut' }}\n```\n\n#### Backdrop Animation\n```tsx\ninitial={{ opacity: 0 }}\nanimate={{ opacity: 1 }}\nexit={{ opacity: 0 }}\ntransition={{ duration: 0.15 }}\n```\n\n---\n\n### 15.6 Code Example: Refund Modal\n\n```tsx\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, RefreshCw, AlertTriangle } from 'lucide-react';\nimport Button from '@/components/ui/Button';\nimport TextField from '@/components/ui/TextField';\n\ninterface RefundModalProps {\n  transaction: Transaction;\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: (amount: number, reason: string) => Promise<void>;\n}\n\nconst RefundModal: React.FC<RefundModalProps> = ({\n  transaction,\n  isOpen,\n  onClose,\n  onConfirm,\n}) => {\n  const [refundType, setRefundType] = useState<'full' | 'partial'>('full');\n  const [amount, setAmount] = useState(transaction.amount.toString());\n  const [reason, setReason] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async () => {\n    setLoading(true);\n    try {\n      const refundAmount = refundType === 'full'\n        ? transaction.amount\n        : parseFloat(amount);\n      await onConfirm(refundAmount, reason);\n      onClose();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={onClose}\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50\"\n          />\n\n          {/* Modal */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.95 }}\n            className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-slate-900/95 backdrop-blur-xl rounded-2xl border border-white/20 z-50\"\n          >\n            {/* Header */}\n            <div className=\"px-6 py-4 border-b border-white/10\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"p-2 bg-blue-500/20 rounded-xl\">\n                    <RefreshCw className=\"h-5 w-5 text-blue-400\" />\n                  </div>\n                  <h2 className=\"text-xl font-semibold text-white\">Issue Refund</h2>\n                </div>\n                <button\n                  onClick={onClose}\n                  className=\"p-2 hover:bg-white/10 rounded-lg transition-colors\"\n                >\n                  <X className=\"h-5 w-5 text-white/60\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Content */}\n            <div className=\"p-6 space-y-6\">\n              {/* Warning Banner */}\n              <div className=\"p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl\">\n                <div className=\"flex items-start space-x-3\">\n                  <AlertTriangle className=\"h-5 w-5 text-amber-400 mt-0.5\" />\n                  <div>\n                    <p className=\"text-sm text-amber-400 font-medium\">Important</p>\n                    <p className=\"text-xs text-amber-400/80 mt-1\">\n                      Refunds are irreversible once processed. Amount will be credited\n                      to customer's original payment method within 5-7 business days.\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Transaction Details */}\n              <div className=\"p-4 bg-white/5 rounded-xl\">\n                <h3 className=\"text-sm font-medium text-white mb-3\">Transaction Details</h3>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white/60\">Transaction ID</span>\n                    <span className=\"text-white font-mono\">{transaction.id}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white/60\">Original Amount</span>\n                    <span className=\"text-white font-medium\">\n                      ₹{transaction.amount.toLocaleString('en-IN')}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Refund Type Selection */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-3\">\n                  Refund Type\n                </label>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <button\n                    onClick={() => setRefundType('full')}\n                    className={`px-4 py-3 rounded-xl border transition-all ${\n                      refundType === 'full'\n                        ? 'bg-blue-500/20 border-blue-500/50 text-blue-400'\n                        : 'bg-white/5 border-white/10 text-white/60 hover:bg-white/10'\n                    }`}\n                  >\n                    Full Refund\n                  </button>\n                  <button\n                    onClick={() => setRefundType('partial')}\n                    className={`px-4 py-3 rounded-xl border transition-all ${\n                      refundType === 'partial'\n                        ? 'bg-blue-500/20 border-blue-500/50 text-blue-400'\n                        : 'bg-white/5 border-white/10 text-white/60 hover:bg-white/10'\n                    }`}\n                  >\n                    Partial Refund\n                  </button>\n                </div>\n              </div>\n\n              {/* Amount Input (Partial only) */}\n              {refundType === 'partial' && (\n                <TextField\n                  name=\"amount\"\n                  label=\"Refund Amount\"\n                  type=\"number\"\n                  value={amount}\n                  onChange={(e) => setAmount(e.target.value)}\n                  placeholder=\"0.00\"\n                  leftIcon=\"₹\"\n                />\n              )}\n\n              {/* Reason Selection */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  Reason for Refund\n                </label>\n                <select\n                  value={reason}\n                  onChange={(e) => setReason(e.target.value)}\n                  className=\"w-full px-3 py-3 bg-white/5 border border-white/10 rounded-xl text-white\"\n                >\n                  <option value=\"\">Select a reason</option>\n                  <option value=\"customer_request\">Customer request</option>\n                  <option value=\"duplicate\">Duplicate payment</option>\n                  <option value=\"service_not_provided\">Service not provided</option>\n                  <option value=\"technical_error\">Technical error</option>\n                </select>\n              </div>\n            </div>\n\n            {/* Footer */}\n            <div className=\"px-6 py-4 border-t border-white/10 flex justify-end space-x-3\">\n              <Button\n                variant=\"ghost\"\n                onClick={onClose}\n                disabled={loading}\n              >\n                Cancel\n              </Button>\n              <Button\n                variant=\"primary\"\n                onClick={handleSubmit}\n                isLoading={loading}\n                leftIcon={<RefreshCw className=\"h-4 w-4\" />}\n              >\n                Confirm Refund\n              </Button>\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n};\n```\n\n---\n\n### 15.7 Modal Patterns\n\n#### Confirmation Dialog\n```tsx\n<Modal\n  isOpen={isOpen}\n  onClose={onClose}\n  size=\"sm\"\n  title=\"Delete Transaction?\"\n  icon={<AlertTriangle className=\"h-5 w-5 text-red-400\" />}\n  footer={\n    <>\n      <Button variant=\"ghost\" onClick={onClose}>Cancel</Button>\n      <Button variant=\"danger\" onClick={handleDelete}>Delete</Button>\n    </>\n  }\n>\n  <p className=\"text-white/70\">\n    This action cannot be undone. The transaction will be permanently removed.\n  </p>\n</Modal>\n```\n\n#### Form Dialog\n```tsx\n<Modal\n  isOpen={isOpen}\n  onClose={onClose}\n  size=\"md\"\n  title=\"Add Team Member\"\n>\n  <form onSubmit={handleSubmit} className=\"space-y-4\">\n    <TextField name=\"email\" label=\"Email Address\" type=\"email\" />\n    <TextField name=\"name\" label=\"Full Name\" />\n    <select name=\"role\" className=\"...\">\n      <option value=\"admin\">Admin</option>\n      <option value=\"member\">Member</option>\n    </select>\n    <div className=\"flex justify-end space-x-3 mt-6\">\n      <Button variant=\"ghost\" type=\"button\" onClick={onClose}>\n        Cancel\n      </Button>\n      <Button variant=\"primary\" type=\"submit\">\n        Send Invitation\n      </Button>\n    </div>\n  </form>\n</Modal>\n```\n\n#### Information Dialog\n```tsx\n<Modal\n  isOpen={isOpen}\n  onClose={onClose}\n  size=\"lg\"\n  title=\"Settlement Details\"\n  icon={<FileText className=\"h-5 w-5 text-blue-400\" />}\n>\n  <div className=\"space-y-4\">\n    {/* Display settlement information */}\n    <Card variant=\"glass\" padding=\"md\">\n      <h3>Settlement #STL-12345</h3>\n      <p>Amount: ₹1,23,456.78</p>\n      <p>Status: Completed</p>\n    </Card>\n  </div>\n</Modal>\n```\n\n---\n\n### 15.8 Accessibility\n\n#### Keyboard Navigation\n```tsx\n// Close on Escape key\nuseEffect(() => {\n  const handleEscape = (e: KeyboardEvent) => {\n    if (e.key === 'Escape' && isOpen) {\n      onClose();\n    }\n  };\n\n  document.addEventListener('keydown', handleEscape);\n  return () => document.removeEventListener('keydown', handleEscape);\n}, [isOpen, onClose]);\n```\n\n#### Focus Management\n```tsx\n// Trap focus inside modal\nimport { useEffect, useRef } from 'react';\n\nconst modalRef = useRef<HTMLDivElement>(null);\n\nuseEffect(() => {\n  if (isOpen && modalRef.current) {\n    const focusableElements = modalRef.current.querySelectorAll(\n      'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n    );\n\n    const firstElement = focusableElements[0] as HTMLElement;\n    const lastElement = focusableElements[focusableElements.length - 1] as HTMLElement;\n\n    firstElement?.focus();\n\n    // Handle Tab key to trap focus\n    const handleTab = (e: KeyboardEvent) => {\n      if (e.key !== 'Tab') return;\n\n      if (e.shiftKey && document.activeElement === firstElement) {\n        e.preventDefault();\n        lastElement?.focus();\n      } else if (!e.shiftKey && document.activeElement === lastElement) {\n        e.preventDefault();\n        firstElement?.focus();\n      }\n    };\n\n    document.addEventListener('keydown', handleTab);\n    return () => document.removeEventListener('keydown', handleTab);\n  }\n}, [isOpen]);\n```\n\n#### ARIA Attributes\n```tsx\n<motion.div\n  role=\"dialog\"\n  aria-modal=\"true\"\n  aria-labelledby=\"modal-title\"\n  aria-describedby=\"modal-description\"\n  ref={modalRef}\n>\n  <h2 id=\"modal-title\">{title}</h2>\n  <div id=\"modal-description\">{children}</div>\n</motion.div>\n```\n\n---\n\n### 15.9 Anti-Patterns\n\n❌ **Modal on Modal**\n```tsx\n// WRONG: Nested modals confuse users\n<Modal isOpen={modal1}>\n  <Modal isOpen={modal2}>...</Modal>\n</Modal>\n\n// CORRECT: Close first modal before opening second\nconst handleNext = () => {\n  setModal1(false);\n  setTimeout(() => setModal2(true), 300); // Wait for exit animation\n};\n```\n\n❌ **No Loading State**\n```tsx\n// WRONG: No feedback during async action\n<Button onClick={handleSubmit}>Submit</Button>\n\n// CORRECT: Show loading state\n<Button onClick={handleSubmit} isLoading={loading}>\n  Submit\n</Button>\n```\n\n❌ **Non-Descriptive Actions**\n```tsx\n// WRONG: Generic button labels\n<Button>OK</Button>\n<Button>Cancel</Button>\n\n// CORRECT: Action-specific labels\n<Button>Confirm Refund</Button>\n<Button>Cancel Refund</Button>\n```\n\n---\n"
}